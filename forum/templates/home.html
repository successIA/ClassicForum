{% extends 'base.html' %}

{% load forum_template_tags %}
{% load humanize %}
{% load static %}

{% block content %}
  <div class="nav-container container-fluid bg-white">
    <div class="row align-items-center">
      {% include 'includes/thread_filter_ctrl.html' with dropdown_active_text=dropdown_active_text %}
      {% include 'includes/thread_add_partial.html' %}
    </div>
  </div>

  <main>
    <div class="container">
      <div class="row mt-4">
        <div class="col-sm-12 col-md-10 offset-md-1 col-lg-9 col-xl-8 offset-lg-1">
          <ul class="list-group mb-4 thread-list-group">
            {% for thread in threads %}
            <li class="list-group-item">
              {% include "includes/thread.html" with thread=thread %}
            </li>
            {% empty %}
              {% if dropdown_active_text == 'recent' %}            
                <div class="card">
                  <div class="text-center text-secondary mt-3 mb-3">
                    <div style="font-size: 2rem"><i class="fas fa-book"></i></div>
                    <div>
                      <p style="font-size: 1.1rem; margin-bottom: 0.5rem;">
                        No Available threads at this moment. Start a new thread or check back later.
                      </p>
                    </div>
                  </div>
                </div>
              {% else %}
                <div class="card">
                  <div class="text-center text-secondary mt-3 mb-3">
                    <div style="font-size: 2rem"><i class="fas fa-book"></i></div>
                    <div>
                      <p style="font-size: 1.4rem; margin-bottom: 0.5rem;">{% empty_thread_description dropdown_active_text %}</p>
                    </div>
                  </div>
                </div>           
              {% endif %}
            {% endfor %}
          </ul>
        </div>
      </div>

      <div class="row mt-3 mb-3">
        <div class="col-sm-12 col-md-10 offset-md-1 col-lg-8 offset-lg-1">
          {% include "includes/pagination.html" with page_obj=threads  %}
        </div>
      </div>

      {% if request.user.is_authenticated %}
        <div class="form-small row">
          <div class="col-sm-12 col-md-10 offset-md-1 col-lg-8 offset-lg-1">
            {% include "includes/comment_form.html" with form=form form_action=form_action %}
          </div>
        </div>
      {% endif %}
    </div>
  </main>
{% endblock content %}