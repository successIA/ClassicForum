{% load humanize %}
{% load forum_template_tags %}
{% load static %}

<div class="media">
  <a href="{% url 'accounts:user_stats' userprofile.username %}" class="text-dark">
    {% if notif.sender.avatar_url %}
    <img src="{{ notif.sender.avatar_url }}" style="object-fit: cover;" class="mr-3 rounded-circle"
      alt="..." width="50" height="50" />
    {% else %}
    <img src="{% static 'img/avatar.svg' %}" style="object-fit: cover;" class="mr-3 rounded-circle" alt="..." width="50"
      height="50" />
    {% endif %}
  </a>

  <div class="media-body">

    <div class="mb-2">
      <strong>
        <a class="text-dark font-weight-bold" href="{% url 'accounts:user_stats' userprofile.username %}">
          {{ notif.sender }}
        </a>
      </strong>
      <span class="text-muted font-weight-light">
        mentioned you in a comment in
      </span>
      <span class="text-italic font-weight-bold">
        <a class="text-dark" href="{{ notif.comment.get_precise_url }}">
          {{ notif.comment.thread.title }}
        </a>
      </span>
      <span class="text-muted font-weight-light"> 
        {{ notif.created|naturaltime|splittime }}.
      </span>
    </div>

    {{ notif.comment.marked_message|safe|truncatechars:300 }}

    {% if notif.comment.marked_message|length > 300 %}
    <a class="text-primary" href="{{ notif.comment.get_precise_url }}">read more</a>
    {% endif %}

  </div>
</div>